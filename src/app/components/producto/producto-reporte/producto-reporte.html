<div class="reporte-container">

  <h2>Productos por rango de precio</h2>

  <div class="form">
    <label>Mínimo:</label>
    <input type="number" [(ngModel)]="minPrice">

    <label>Máximo:</label>
    <input type="number" [(ngModel)]="maxPrice">

    <button (click)="buscar()">Buscar</button>
  </div>

  @if(hasData){

    <div class="chart-container">
      <canvas
        baseChart
        [datasets]="barChartData"
        [labels]="barChartLabels"
        [options]="barChartOptions"
        [legend]="barChartLegend"
        [type]="barChartType">
      </canvas>
    </div>

    <h3>Resultados</h3>

    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 full-width-table">

      <ng-container matColumnDef="idProducto">
        <th mat-header-cell *matHeaderCellDef>ID</th>
        <td mat-cell *matCellDef="let element">{{ element.idProducto }}</td>
      </ng-container>

      <ng-container matColumnDef="nombreProducto">
        <th mat-header-cell *matHeaderCellDef>Nombre</th>
        <td mat-cell *matCellDef="let element">{{ element.nombreProducto }}</td>
      </ng-container>

      <ng-container matColumnDef="precioProducto">
        <th mat-header-cell *matHeaderCellDef>Precio</th>
        <td mat-cell *matCellDef="let element">{{ element.precioProducto }}</td>
      </ng-container>

      <ng-container matColumnDef="stockProducto">
        <th mat-header-cell *matHeaderCellDef>Stock</th>
        <td mat-cell *matCellDef="let element">{{ element.stockProducto }}</td>
      </ng-container>

      <ng-container matColumnDef="nombreTipoProducto">
        <th mat-header-cell *matHeaderCellDef>Tipo</th>
        <td mat-cell *matCellDef="let element">{{ element.nombreTipoProducto }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

    </table>
  }

  @if(!hasData){
    <div class="no-data">
      <mat-icon class="no-data-icon">info_outline</mat-icon>
      <p class="no-data-message">No hay datos disponibles para mostrar.</p>
    </div>
  }
</div>
