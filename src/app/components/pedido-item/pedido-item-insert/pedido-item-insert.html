<!-- src/app/components/pedido-item/pedido-item-insert/pedido-item-insert.html -->
<div class="form-container">
  <h1>{{ edicion ? 'Editar ítem de pedido' : 'Nuevo ítem de pedido' }}</h1>

  <form [formGroup]="form" (ngSubmit)="aceptar()">
    <!-- FILA CANTIDAD / PRECIO -->
    <div class="row">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Cantidad</mat-label>
        <input type="number" matInput formControlName="cantidadPedidoItem" />

        <mat-error *ngIf="campoInvalido('cantidadPedidoItem')">
          La cantidad es obligatoria y debe ser mayor o igual a 1.
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Precio unitario</mat-label>
        <input type="number" matInput formControlName="precioPedidoItem" />

        <mat-error *ngIf="campoInvalido('precioPedidoItem')">
          El precio es obligatorio y no puede ser negativo.
        </mat-error>
      </mat-form-field>
    </div>

    <!-- FILA PEDIDO / PRODUCTO -->
    <div class="row">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Pedido</mat-label>
        <mat-select formControlName="pedido">
          <mat-option *ngFor="let ped of listaPedidos" [value]="ped.idPedido">
            Pedido #{{ ped.idPedido }}
          </mat-option>
        </mat-select>

        <mat-error *ngIf="campoInvalido('pedido')"> Debes seleccionar un pedido. </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Producto</mat-label>
        <mat-select formControlName="producto">
          <mat-option *ngFor="let prod of listaProductos" [value]="prod.idProducto">
            {{ prod.nombreProducto }}
          </mat-option>
        </mat-select>

        <mat-error *ngIf="campoInvalido('producto')"> Debes seleccionar un producto. </mat-error>
      </mat-form-field>
    </div>

    <div class="buttons">
      <button mat-raised-button color="primary" type="submit">
        {{ edicion ? 'Guardar cambios' : 'Registrar' }}
      </button>
      <button mat-raised-button type="button" (click)="cancelar()">Cancelar</button>
    </div>
  </form>
</div>
