<!-- src/app/components/home/home-index/home-index.html -->
<div class="landing">
  <!-- Navegación -->
  <section class="index-header">
    <nav id="navbar">
      <a class="logo" routerLink="/home">TextilConnect</a>

      <ul class="nav-links" [class.is-open]="mobileMenuOpen">
        <li>
          <a
            routerLink="/home"
            routerLinkActive="active"
            [routerLinkActiveOptions]="{ exact: true }"
            >Home</a
          >
        </li>

        <!-- ✅ SOLO LOGUEADO -->
        <li *ngIf="isLoggedIn">
          <a routerLink="/dashboard" routerLinkActive="active">Dashboard</a>
        </li>

        <li><a routerLink="/home/about" routerLinkActive="active">Nosotros</a></li>
        <li><a routerLink="/home/products" routerLinkActive="active">Productos</a></li>
        <li><a routerLink="/home/community" routerLinkActive="active">Comunidad</a></li>
        <li><a routerLink="/home/contact" routerLinkActive="active">Contacto</a></li>
      </ul>

      <i class="fa fa-bars mobile-menu" (click)="toggleMenu()" aria-label="Abrir menú"></i>

      <div class="auth-section">
        <!-- No logueado -->
        <div class="auth-buttons" *ngIf="!isLoggedIn">
          <a class="auth-btn login-btn" routerLink="/login">Iniciar Sesión</a>
          <a class="auth-btn register-btn" routerLink="/registro">Registrarse</a>
        </div>

        <!-- Logueado -->
        <div class="user-menu" *ngIf="isLoggedIn">
          <div class="notification-icon" (click)="toggleUserMenu()">
            <i class="fas fa-bell"></i>
            <span class="notification-badge" *ngIf="notificationCount > 0">{{
              notificationCount
            }}</span>
          </div>

          <div class="user-info" (click)="toggleUserMenu()">
            <div class="user-avatar">{{ (userName.charAt(0) || 'U') | uppercase }}</div>
            <span>{{ userName }}</span>
            <i class="fas fa-chevron-down"></i>
          </div>

          <div class="dropdown-menu" *ngIf="userMenuOpen">
            <a class="dropdown-item" routerLink="/home/perfil"
              ><i class="fas fa-user"></i> Mi Perfil</a
            >
            <a class="dropdown-item" routerLink="/favorito"
              ><i class="fas fa-heart"></i> Mis Favoritos</a
            >
            <a class="dropdown-item" routerLink="/proyecto"
              ><i class="fas fa-camera"></i> Mis Proyectos</a
            >
            <button type="button" class="dropdown-item" (click)="logout()">
              <i class="fas fa-sign-out-alt"></i> Cerrar Sesión
            </button>
          </div>
        </div>
      </div>
    </nav>
  </section>

  <!-- Hero Section -->
  <section class="header" id="home">
    <div class="hero-content">
      <h1>Conectamos la Industria Textil</h1>
      <p>
        La plataforma digital que facilita procesos y conecta proveedores, fabricantes y diseñadores
        en un solo lugar
      </p>
      <a routerLink="/home/products" class="cta-button">Explorar Productos</a>
    </div>
  </section>

  <!-- Sección de Productos -->
  <section class="products-section" id="products">
    <div class="container">
      <h2 class="section-title">¿Qué necesitas?</h2>

      <div class="products-grid">
        <div class="product-card fade-in" *ngFor="let p of products">
          <div class="product-image">
            <img [src]="p.img" [alt]="p.alt" />
          </div>
          <div class="product-info">
            <h3>{{ p.title }}</h3>
            <p>{{ p.desc }}</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Sección de Tendencias -->
  <section class="trends-section" id="trends">
    <div class="container">
      <h2 class="section-title">Tendencias y Novedades</h2>
      <p style="text-align: center; margin-bottom: 3rem; color: #666">
        Mantente al día con las últimas tendencias en el mundo textil
      </p>

      <div class="trends-grid">
        <div class="trend-card fade-in" *ngFor="let t of trends">
          <div class="trend-video">
            <iframe
              [src]="t.safeUrl"
              [title]="t.title"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              allowfullscreen
            ></iframe>
          </div>
          <div class="trend-content">
            <h3>{{ t.title }}</h3>
            <p>{{ t.desc }}</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Sección de Comentarios -->
  <section class="comments-section" id="contact">
    <div class="container">
      <h2 class="section-title">Únete a la Conversación</h2>

      <div class="comment-form">
        <form [formGroup]="commentForm" (ngSubmit)="submitComment()">
          <div class="form-group">
            <label for="name">Nombre</label>
            <input id="name" type="text" formControlName="name" />
          </div>

          <div class="form-group">
            <label for="email">Correo Electrónico</label>
            <input id="email" type="email" formControlName="email" />
          </div>

          <div class="form-group">
            <label for="comment">Tu Comentario</label>
            <textarea id="comment" rows="4" formControlName="comment"></textarea>
          </div>

          <button type="submit" class="submit-btn">Enviar Comentario</button>

          <div class="success-message" *ngIf="successMsg">{{ successMsg }}</div>
          <div class="error-message" *ngIf="errorMsg">{{ errorMsg }}</div>
        </form>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <section class="footer">
    <div class="container">
      <h4>Síguenos en Nuestras Redes</h4>
      <div class="social-icons">
        <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
        <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
        <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
      </div>
      <p>
        &copy; 2025 TextilConnect. Hecho con <i class="fas fa-heart"></i> para un futuro sostenible.
      </p>
    </div>
  </section>
</div>
