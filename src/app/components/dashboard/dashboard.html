<div class="dashboard-root">
  <!-- NAVBAR -->
  <app-dashboard-navbar [rol]="rolActual || ''"></app-dashboard-navbar>

  <div class="dashboard-body">
    <aside class="sidebar-root">
      <!-- Panel usuario -->
      <div class="user-panel">
        <div class="user-panel-left">
          <div class="user-avatar">{{ userInitials }}</div>

          <div class="user-meta">
            <div class="user-label">Sesión activa</div>

            <div class="user-name">
              <span>{{ nombreActual || 'Usuario' }}</span>
            </div>

            <div class="user-role">
              Rol:
              <span>{{ rolActual || '---' }}</span>
            </div>
          </div>
        </div>

        <button
          mat-icon-button
          class="logout-btn"
          aria-label="Cerrar sesión"
          (click)="logout()"
        >
          <span class="material-icons">logout</span>
        </button>
      </div>

      <div class="menu">
        <!-- ===== ADMIN ONLY ===== -->
        <ng-container *ngIf="isAdmin">
          <p class="menu-section">Gestión de usuarios</p>

          <a routerLink="/usuarios" routerLinkActive="active-link" class="menu-item">
            <span class="material-icons">group</span>
            <span>Usuarios</span>
          </a>

          <a routerLink="/roles" routerLinkActive="active-link" class="menu-item">
            <span class="material-icons">shield</span>
            <span>Roles</span>
          </a>
        </ng-container>

        <!-- ===== Catálogo / Productos ===== -->
        <p class="menu-section">Catálogos / productos</p>

        <!-- TipoProducto solo ADMIN (según tu resumen) -->
        <a
          *ngIf="isAdmin"
          routerLink="/tipoproducto"
          routerLinkActive="active-link"
          class="menu-item"
        >
          <span class="material-icons">category</span>
          <span>Tipo producto</span>
        </a>

        <!-- Producto: todos logueados -->
        <a routerLink="/producto" routerLinkActive="active-link" class="menu-item">
          <span class="material-icons">inventory_2</span>
          <span>Producto</span>
        </a>

        <!-- Producto foto: ADMIN + VENDEDOR -->
        <a
          *ngIf="isAdmin || isVendedor"
          routerLink="/productofoto"
          routerLinkActive="active-link"
          class="menu-item"
        >
          <span class="material-icons">photo</span>
          <span>Producto foto</span>
        </a>

        <!-- Favorito: VENDEDOR + COMPRADOR -->
        <a
          *ngIf="isVendedor || isComprador"
          routerLink="/favorito"
          routerLinkActive="active-link"
          class="menu-item"
        >
          <span class="material-icons">favorite</span>
          <span>Favorito</span>
        </a>

        <!-- Calificación: todos (admin lista+elimina; v/c insert/mod) -->
        <a routerLink="/calificacion" routerLinkActive="active-link" class="menu-item">
          <span class="material-icons">star</span>
          <span>Calificación</span>
        </a>

        <!-- ===== Proyectos ===== -->
        <p class="menu-section">Proyectos</p>

        <!-- Tipoproyecto: ADMIN + VENDEDOR -->
        <a
          *ngIf="isAdmin || isVendedor"
          routerLink="/tipoproyecto"
          routerLinkActive="active-link"
          class="menu-item"
        >
          <span class="material-icons">view_quilt</span>
          <span>Tipo proyecto</span>
        </a>

        <!-- Proyecto: ADMIN + VENDEDOR -->
        <a
          *ngIf="isAdmin || isVendedor"
          routerLink="/proyecto"
          routerLinkActive="active-link"
          class="menu-item"
        >
          <span class="material-icons">work</span>
          <span>Proyecto</span>
        </a>

        <!-- Comentarios: todos -->
        <a
          routerLink="/comentarioproyecto"
          routerLinkActive="active-link"
          class="menu-item"
        >
          <span class="material-icons">chat</span>
          <span>Comentario proyecto</span>
        </a>

        <!-- ===== Ventas / pedidos / entrega ===== -->
        <p class="menu-section">Ventas / pedidos / entrega</p>

        <!-- Pedido: todos -->
        <a routerLink="/pedido" routerLinkActive="active-link" class="menu-item">
          <span class="material-icons">shopping_cart</span>
          <span>Pedido</span>
        </a>

        <!-- Pedido Item: ADMIN + COMPRADOR -->
        <a
          *ngIf="isAdmin || isComprador"
          routerLink="/pedido-item"
          routerLinkActive="active-link"
          class="menu-item"
        >
          <span class="material-icons">list</span>
          <span>Pedido item</span>
        </a>

        <!-- Comprobante: ADMIN + VENDEDOR -->
        <a
          *ngIf="isAdmin || isVendedor"
          routerLink="/comprobante"
          routerLinkActive="active-link"
          class="menu-item"
        >
          <span class="material-icons">receipt_long</span>
          <span>Comprobante</span>
        </a>

        <!-- Entrega: ADMIN + VENDEDOR -->
        <a
          *ngIf="isAdmin || isVendedor"
          routerLink="/entrega"
          routerLinkActive="active-link"
          class="menu-item"
        >
          <span class="material-icons">local_shipping</span>
          <span>Entrega</span>
        </a>

        <!-- Método pago: ADMIN -->
        <a
          *ngIf="isAdmin"
          routerLink="/metodopago"
          routerLinkActive="active-link"
          class="menu-item"
        >
          <span class="material-icons">payments</span>
          <span>Método de pago</span>
        </a>

        <!-- Tarjeta: todos (pero /tarjeta/new solo vendedor/comprador) -->
        <a routerLink="/tarjeta" routerLinkActive="active-link" class="menu-item">
          <span class="material-icons">credit_card</span>
          <span>Tarjeta</span>
        </a>

        <!-- ===== Reportes ===== -->
        <p class="menu-section">Reportes</p>

        <a
          *ngIf="isAdmin"
          routerLink="/producto/bprecio"
          routerLinkActive="active-link"
          class="menu-item"
        >
          <span class="material-icons">insights</span>
          <span>Reporte precios productos</span>
        </a>

        <a
          *ngIf="isAdmin"
          routerLink="/comentarioproyecto/reporte"
          routerLinkActive="active-link"
          class="menu-item"
        >
          <span class="material-icons">analytics</span>
          <span>Reporte comentarios proyecto</span>
        </a>

        <a
          *ngIf="isAdmin || isVendedor"
          routerLink="/comprobante/reporte"
          routerLinkActive="active-link"
          class="menu-item"
        >
          <span class="material-icons">receipt</span>
          <span>Reporte comprobantes</span>
        </a>

        <a
          *ngIf="isAdmin || isVendedor"
          routerLink="/comprobante/reporte2"
          routerLinkActive="active-link"
          class="menu-item"
        >
          <span class="material-icons">request_quote</span>
          <span>Reporte IGV comprobantes</span>
        </a>

        <a
          *ngIf="isAdmin || isVendedor"
          routerLink="/pedido/reporte"
          routerLinkActive="active-link"
          class="menu-item"
        >
          <span class="material-icons">shopping_bag</span>
          <span>Reporte pedidos</span>
        </a>

        <a
          *ngIf="isAdmin || isVendedor"
          routerLink="/entrega/reporte"
          routerLinkActive="active-link"
          class="menu-item"
        >
          <span class="material-icons">local_shipping</span>
          <span>Reporte entregas</span>
        </a>

        <a
          *ngIf="isAdmin"
          routerLink="/tarjeta/reporte"
          routerLinkActive="active-link"
          class="menu-item"
        >
          <span class="material-icons">credit_score</span>
          <span>Reporte tarjetas</span>
        </a>

        <a
          *ngIf="isAdmin"
          routerLink="/tarjeta/reporte2"
          routerLinkActive="active-link"
          class="menu-item"
        >
          <span class="material-icons">bar_chart</span>
          <span>Reporte tarjetas (detalle)</span>
        </a>

        <!-- ===== Configuración / otros ===== -->
        <p class="menu-section">Configuración / otros</p>

        <a
          *ngIf="isAdmin"
          routerLink="/tipodocumento"
          routerLinkActive="active-link"
          class="menu-item"
        >
          <span class="material-icons">description</span>
          <span>Tipo documento</span>
        </a>

        <a
          *ngIf="isAdmin || isComprador"
          routerLink="/presupuestomensual"
          routerLinkActive="active-link"
          class="menu-item"
        >
          <span class="material-icons">account_balance_wallet</span>
          <span>Presupuesto mensual</span>
        </a>

        <a
          *ngIf="isAdmin"
          routerLink="/notificacion"
          routerLinkActive="active-link"
          class="menu-item"
        >
          <span class="material-icons">notifications</span>
          <span>Notificación</span>
        </a>
      </div>
    </aside>

    <main class="dashboard-content">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>
