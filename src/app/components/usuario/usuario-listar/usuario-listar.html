  <!-- src/app/components/usuario/usuario-listar/usuario-listar.html -->

  <div class="tc-page">
    <!-- Header -->
    <section class="tc-hero">
      <div class="tc-hero-left">
        <div class="tc-hero-icon">
          <span class="material-icons">group</span>
        </div>

        <div class="tc-hero-text">
          <h1 class="tc-hero-title">Usuarios</h1>
          <p class="tc-hero-subtitle">Administra cuentas, roles y calificaciones del sistema.</p>
        </div>
      </div>

      <div class="tc-hero-right">
        <span class="tc-total">
          Total: <b>{{ dataSource.data.length || 0 }}</b>
        </span>

        <a class="tc-btn" mat-raised-button routerLink="/usuarios/news">
          <mat-icon>add</mat-icon>
          Nuevo usuario
        </a>
      </div>
    </section>

    <!-- Tabla -->
    <section class="tc-card">
      <div class="tc-card-top">
        <span class="tc-pill">Listado</span>
      </div>

      <div class="tc-table-wrap">
        <table mat-table [dataSource]="dataSource" class="tc-table">
          <!-- ID -->
          <ng-container matColumnDef="idUsuario">
            <th mat-header-cell *matHeaderCellDef class="tc-col-id">ID</th>
            <td mat-cell *matCellDef="let row" class="tc-col-id">{{ row.idUsuario }}</td>
          </ng-container>
          <!-- Foto -->
          <ng-container matColumnDef="foto">
            <th mat-header-cell *matHeaderCellDef>Foto</th>
            <td mat-cell *matCellDef="let element">
              <img
                [src]="element.fotoUrl || 'assets/img/avatar-default.png'"
                alt="Foto"
                class="usuario-avatar"
              />
            </td>
          </ng-container>

          <!-- Nombre -->
          <ng-container matColumnDef="nombreUsuario">
            <th mat-header-cell *matHeaderCellDef class="tc-col-name">Nombre</th>
            <td mat-cell *matCellDef="let row" class="tc-col-name">{{ row.nombreUsuario }}</td>
          </ng-container>

          <!-- Email -->
          <ng-container matColumnDef="emailUsuario">
            <th mat-header-cell *matHeaderCellDef class="tc-col-email">Email</th>
            <td mat-cell *matCellDef="let row" class="tc-col-email">{{ row.emailUsuario }}</td>
          </ng-container>

          <!-- Username -->
          <ng-container matColumnDef="username">
            <th mat-header-cell *matHeaderCellDef class="tc-col-user">Usuario</th>
            <td mat-cell *matCellDef="let row" class="tc-col-user">{{ row.username }}</td>
          </ng-container>

          <!-- Teléfono -->
          <ng-container matColumnDef="telefonoUsuario">
            <th mat-header-cell *matHeaderCellDef class="tc-col-phone">Teléfono</th>
            <td mat-cell *matCellDef="let row" class="tc-col-phone">{{ row.telefonoUsuario }}</td>
          </ng-container>

          <!-- Rol -->
          <ng-container matColumnDef="rol">
            <th mat-header-cell *matHeaderCellDef class="tc-col-role">Rol</th>
            <td mat-cell *matCellDef="let row" class="tc-col-role">
              <span class="tc-chip">{{ row.nombreRol }}</span>
            </td>
          </ng-container>

          <!-- Promedio -->
          <ng-container matColumnDef="promedio">
            <th mat-header-cell *matHeaderCellDef class="tc-col-score">Promedio</th>
            <td mat-cell *matCellDef="let row" class="tc-col-score">
              <span class="tc-strong">{{ row.promedioCalificacion | number : '1.2-2' }}</span>
            </td>
          </ng-container>

          <!-- Total -->
          <ng-container matColumnDef="total">
            <th mat-header-cell *matHeaderCellDef class="tc-col-total"># Calificaciones</th>
            <td mat-cell *matCellDef="let row" class="tc-col-total">{{ row.totalCalificacion }}</td>
          </ng-container>

          <!-- Acciones -->
          <ng-container matColumnDef="acciones">
            <th mat-header-cell *matHeaderCellDef class="tc-col-actions">Acciones</th>
            <td mat-cell *matCellDef="let row" class="tc-col-actions">
              <div class="tc-actions">
                <button
                  mat-icon-button
                  class="tc-icon-btn tc-edit"
                  [routerLink]="['/usuarios/edits', row.idUsuario]"
                  aria-label="Editar"
                >
                  <mat-icon>edit</mat-icon>
                </button>

                <button
                  mat-icon-button
                  class="tc-icon-btn tc-del"
                  (click)="eliminar(row.idUsuario)"
                  aria-label="Eliminar"
                >
                  <mat-icon>delete</mat-icon>
                </button>
              </div>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
      </div>
    </section>
  </div>
